(this.webpackJsonpaga=this.webpackJsonpaga||[]).push([[0],{11:function(e,t,s){},28:function(e,t,s){},72:function(e,t,s){"use strict";s.r(t);var i=s(0),n=s(1),a=s.n(n),c=s(21),r=s.n(c),l=(s(28),s(6)),o=s(7),d=s(3),u=s(9),h=s(8),m=(s(11),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(l.a)(this,s),(i=t.call(this,e)).state={url:null},i}return Object(o.a)(s,[{key:"handleClick",value:function(){var e=this.state.url;if(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/),s=!(!t||11!=t[7].length)&&t[7];s?(this.props.setVideo(s),this.props.getScript(s)):alert("Please, insert valid URL!")}}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{className:"container-fluid min-vh-100",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-3"}),Object(i.jsx)("div",{className:"col-6",children:Object(i.jsxs)("div",{className:"vertical-align",children:[Object(i.jsx)("h1",{children:"Automatic Lecture Summarization"}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("div",{className:"input-group-prepend",children:Object(i.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"YouTube Link"})}),Object(i.jsx)("input",{type:"text",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",onChange:function(t){return e.setState({url:t.target.value})}}),Object(i.jsx)("div",{className:"input-group-append",children:Object(i.jsx)("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.handleClick()},children:"Submit"})})]})]})}),Object(i.jsx)("div",{className:"col-3"})]})})}}]),s}(a.a.Component)),b=s(10),p=s.n(b),j=s(12),f=s.n(j),v=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(l.a)(this,s),(i=t.call(this,e)).handleSeek=function(e){i.player.setState({seeking:!0}),i.player.seekTo(e),setTimeout((function(){return i.player.setState({seeking:!1})}),800)},i.state={detail:"Medium",mouseOverTimeout:!1,selectedWord:null,wikiDefinition:null,wikiLink:null,showVideo:!1,pressCount:0},i.ContentEditable=a.a.createRef(),i.hoverSpan=i.hoverSpan.bind(Object(d.a)(i)),i.moveVideo=i.moveVideo.bind(Object(d.a)(i)),i.setTimer=i.setTimer.bind(Object(d.a)(i)),i.handleImagePress=i.handleImagePress.bind(Object(d.a)(i)),i.exportHTML=i.exportHTML.bind(Object(d.a)(i)),i}return Object(o.a)(s,[{key:"exportHTML",value:function(){var e="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML to Word Document with JavaScript</title></head><body>"+document.getElementById("source-html").innerHTML+"</body></html>",t="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download="YTsummary.docx",s.click(),document.body.removeChild(s)}},{key:"handleImagePress",value:function(e){var t=this;this.setState({pressCount:this.state.pressCount+1}),setTimeout((function(){0!==t.state.pressCount&&(1===t.state.pressCount?t.moveVideo(e):2===t.state.pressCount&&t.hoverSpan(e),t.setState({pressCount:0}))}),300)}},{key:"setTimer",value:function(){console.log("setTimer"),this.setState({hoverTimer:new Date})}},{key:"hoverSpan",value:function(e){var t=this;if("SPAN"===e.target.nodeName){console.log(" Input to wiki:");var s={selectedWord:e.target.textContent};fetch("/flask-backend/wiki",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){t.setState({selectedWord:e.keyword}),t.setState({wikiDefinition:e.result}),t.setState({wikiLink:e.url})})).catch((function(e){console.error("Error:",e)}))}}},{key:"moveVideo",value:function(e){if("SPAN"===e.target.nodeName){var t=e.target.className;"undefined"!==t?(console.log(t),this.navigateTo(t)):console.log("Null timestamp")}}},{key:"componentDidMount",value:function(){this.ContentEditable.current.addEventListener("click",this.handleImagePress)}},{key:"handleClick",value:function(e){this.setState({detail:e}),this.props.setDetail(e)}},{key:"findVideo",value:function(e){var t=this;return e=e.replace("watch?v=","embed/"),Object(i.jsx)("div",{className:"row video-container",children:Object(i.jsx)(f.a,{ref:function(e){t.player=e},url:this.props.url,onSeek:this.handleSeek,playing:!0,controls:!0,width:"100%",height:"100%"})})}},{key:"navigateTo",value:function(e){this.state.showVideo||this.setState({showVideo:!0}),this.player&&this.player.props.onSeek(e)}},{key:"render",value:function(){var e=this,t=this.findVideo(this.props.url);return Object(i.jsx)("div",{className:"container-fluid min-vh-100",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-6 video-col",children:[t,Object(i.jsx)("div",{className:"row video-info-container",children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("h5",{className:"subtitle",children:[" ",this.props.title]}),Object(i.jsx)("br",{})]})}),Object(i.jsx)("hr",{}),Object(i.jsx)("div",{className:"row complexity-info-container",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-7",children:[Object(i.jsx)("h4",{className:"subtitle",children:"Level of Detail"}),"How summarized you want your lecture to be"]}),Object(i.jsx)("div",{className:"col-4",children:Object(i.jsx)("div",{className:"col-btn",children:["Low","Medium","High"].map((function(t,s){return Object(i.jsx)("button",{type:"button",className:t===e.state.detail?"btn btn-light detail-btn":"btn btn-dark detail-btn",onClick:function(){return e.handleClick(t)},children:t},"btn"+t)}))})})]})}),Object(i.jsx)("hr",{})]}),Object(i.jsx)("div",{className:"col-6 text-col",children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)("div",{className:"summary-header",children:[Object(i.jsx)("button",{type:"button",className:"btn btn-success mr-1",id:"btn-export",onClick:function(){return e.exportHTML()},children:"Export"}),Object(i.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return e.props.setPage("edit")},children:"Show Original Text"})]}),Object(i.jsxs)("div",{className:"summary",children:[null!==this.state.selectedWord?Object(i.jsxs)("div",{className:"container-fluid add-info",children:[Object(i.jsx)("h3",{className:"subtitle title-add-info",children:this.state.selectedWord}),Object(i.jsx)("button",{type:"button",className:"btn btn-danger btnEdit btn-add-info",onClick:function(){return e.setState({selectedWord:null})},children:"Close"}),Object(i.jsx)("div",{children:Object(i.jsx)("i",{children:this.state.wikiDefinition})}),Object(i.jsxs)("div",{children:["Learn more on  ",Object(i.jsx)("a",{href:this.state.wikiLink,children:"Wikipedia"}),"."]})]}):Object(i.jsx)("div",{}),Object(i.jsxs)("div",{class:"border-bottom",children:[" ",Object(i.jsx)("h4",{class:"d-flex justify-content-center",children:"Summary"}),Object(i.jsx)("i",{class:"d-flex justify-content-center",children:"Click to navigate and double-click to see the definition."})]}),Object(i.jsx)("div",{class:"container pt-3",children:Object(i.jsx)(p.a,{innerRef:this.ContentEditable,id:"source-html",html:void 0===this.props.sentSpan?"Summarizing...":this.props.sentSpan,disabled:!0,onChange:this.props.editSummary})})]})]})})]})})}}]),s}(a.a.Component),O=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(l.a)(this,s),(i=t.call(this,e)).handleOnClick=function(e){console.log(e.target.className),"undefined"!==e.target.className&&e.target.className in i.myRef&&(i.myRef[e.target.className].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),i.myRef[e.target.className].style.backgroundColor="LightPink",setTimeout((function(){i.myRef[e.target.className].style.backgroundColor=""}),1e3))},i.handleSeek=function(e){console.log("handleSeek",e),i.player.setState({seeking:!0}),i.player.seekTo(e),setTimeout((function(){return i.player.setState({seeking:!1})}),800)},i.state={showVideo:!1,script:"",vid:null,editMode:!1},i.myRef=[],i}return Object(o.a)(s,[{key:"findVideo",value:function(e){var t=this;return Object(i.jsx)("div",{className:"row edit-video-container",children:Object(i.jsx)(f.a,{ref:function(e){t.player=e},url:this.props.url,onSeek:this.handleSeek,controls:!0,width:"100%"})})}},{key:"navigateTo",value:function(e){console.log(e,this.player),this.state.showVideo||this.setState({showVideo:!0}),this.player&&(console.log("HERE",this.player),this.player.props.onSeek(e))}},{key:"render",value:function(){var e=this,t=this.findVideo(this.props.url);return Object(i.jsxs)("div",{className:"container-fluid",children:[this.state.showVideo?Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-12 video-col",children:t})}):Object(i.jsx)("div",{}),Object(i.jsxs)("div",{className:"row edit-video-info-container",children:[Object(i.jsx)("div",{className:"col-10",children:Object(i.jsx)("h5",{className:"subtitle",class:"mt-5",children:this.props.title})}),Object(i.jsxs)("div",{className:"col-2",style:{textAlign:"right"},children:[Object(i.jsx)("button",{type:"button",className:"btn btn-danger btnEdit btn-block",onClick:function(){return e.props.setPage("main")},children:"Hide Original Text"}),Object(i.jsx)("button",{type:"button",className:"btn btn-warning btnEdit btn-block",onClick:function(){return e.setState({showVideo:!e.state.showVideo})},children:this.state.showVideo?"Hide Video":"Show Video"})]})]}),Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-6 text-col",children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("div",{className:"edit-summary-header",children:Object(i.jsx)("div",{style:{display:"inline-block"},children:Object(i.jsx)("h4",{children:"Original Text"})})}),Object(i.jsxs)("div",{className:"summary min-vh-100",children:[Object(i.jsx)(p.a,{innerRef:this.ContentEditable,html:" ",disabled:!0,onChange:this.props.editFullText}),this.props.fullText.map((function(t,s){return Object(i.jsx)("span",{style:{cursor:"pointer"},className:e.props.timestamps[s],ref:function(t){e.myRef[e.props.timestamps[s]]=t},onClick:function(){e.navigateTo(e.props.timestamps[s])},children:t+" "},e.props.timestamps[s])}))]})]})}),Object(i.jsx)("div",{className:"col-6 text-col",children:Object(i.jsxs)("div",{className:"container h-100",children:[Object(i.jsxs)("div",{className:"edit-summary-header",children:[Object(i.jsx)("div",{class:"my-auto",style:{display:"inline-block"},children:Object(i.jsx)("h4",{children:"Summary"})}),Object(i.jsx)("div",{style:{display:"inline-block",float:"right"},children:Object(i.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return e.setState({editMode:!e.state.editMode})},children:this.state.editMode?"Save":"Edit"})})]}),Object(i.jsx)("div",{className:"summary min-vh-100",children:this.state.editMode?Object(i.jsx)(p.a,{innerRef:this.ContentEditable,html:this.props.sentSpan,disabled:!1,onChange:this.props.editSummary}):Object(i.jsx)(p.a,{innerRef:void 0===this.props.sentSpan?"Summarizing...":this.props.sentSpan,html:this.props.sentSpan,disabled:!0,onClick:this.handleOnClick})})]})})]})]})}}]),s}(a.a.Component),y=s(13),x=(s(52),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(l.a)(this,s),(i=t.call(this,e)).state={page:"input",url:null,fullText:null,summary:null,sentSummary:null,wordSummary:null,detail_level:.4,timestamps:null,wordSpan:null,title:null},i.setVideo=i.setVideo.bind(Object(d.a)(i)),i.setPage=i.setPage.bind(Object(d.a)(i)),i.editSummary=i.editSummary.bind(Object(d.a)(i)),i.editFullText=i.editFullText.bind(Object(d.a)(i)),i.createSpanSummary=i.createSpanSummary.bind(Object(d.a)(i)),i.setDetail=i.setDetail.bind(Object(d.a)(i)),i.getScript=i.getScript.bind(Object(d.a)(i)),i}return Object(o.a)(s,[{key:"getScript",value:function(e){var t=this,s=[],i={url:"http://www.youtube.com/watch?v="+e};fetch("/flask-backend/get-script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log(e);var i=e.text;t.setState({timestamps:e.timestamps});for(var n=i.length,a=0;a<n;a++){for(var c=i[a];c.includes("&amp;#39;");)c=c.replace("&amp;#39;","'");for(;c.includes("&amp;quot;");)c=c.replace("&amp;quot;",'"');s.push(c)}t.setState({fullText:s}),t.createSpanSummary()}))}},{key:"setVideo",value:function(e){var t=this,s="http://www.youtube.com/watch?v="+e;this.setState({url:s,page:"main"});var i={vid:e};fetch("/flask-backend/title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){t.setState({title:e.title})}))}},{key:"createSpanSummary",value:function(){var e=this;console.log(" Input to summarizer:");var t=this.state;Object(y.trackPromise)(fetch("/flask-backend/summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){var s=t.result.split(".").map((function(t){return t.split(" ").map((function(s){return"<span style='cursor:pointer' class="+e.state.timestamps[e.state.fullText.findIndex((function(e){return t.includes(e)}))]+">"+s+"</span>"})).join(" ")+"."})).join("");e.setState({sentSpan:s}),e.setState({summary:t.result})})).catch((function(e){console.error("Error:",e)})))}},{key:"editSummary",value:function(e){this.setState({sentSpan:e.target.value})}},{key:"setDetail",value:function(e){var t=.4;"Low"===e?t=.1:"High"===e?t=.7:"Medium"===e&&(t=.4),this.setState({detail_level:t}),this.createSpanSummary()}},{key:"editFullText",value:function(e){this.setState({fullText:e.target.value})}},{key:"setPage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e;return"input"===this.state.page?e=Object(i.jsx)(m,{getScript:this.getScript,setVideo:this.setVideo}):"main"===this.state.page?e=Object(i.jsx)(v,{title:this.state.title,url:this.state.url,summary:this.state.summary,fullText:this.getScript,detail_level:this.state.detail_level,sentSpan:this.state.sentSpan,wordSpan:this.state.wordSpan,setPage:this.setPage,editSummary:this.editSummary,setDetail:this.setDetail,createSpanSummary:this.createSpanSummary}):"edit"===this.state.page&&(e=Object(i.jsx)(O,{title:this.state.title,url:this.state.url,summary:this.state.summary,editSummary:this.editSummary,sentSpan:this.state.sentSpan,createSpanSummary:this.createSpanSummary,setPage:this.setPage,fullText:this.state.fullText,timestamps:this.state.timestamps,editFullText:this.editFullText})),Object(i.jsx)("div",{className:"App",children:e})}}]),s}(a.a.Component)),S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,73)).then((function(t){var s=t.getCLS,i=t.getFID,n=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),i(e),n(e),a(e),c(e)}))},g=s(22),k=s.n(g),N=function(e){return Object(y.usePromiseTracker)().promiseInProgress&&Object(i.jsx)("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(i.jsx)(k.a,{type:"ThreeDots",color:"white",height:"100",width:"100"})})};r.a.render(Object(i.jsxs)(a.a.StrictMode,{children:[Object(i.jsx)(N,{}),Object(i.jsx)(x,{})]}),document.getElementById("root")),S()}},[[72,1,2]]]);
//# sourceMappingURL=main.9c317bf4.chunk.js.map